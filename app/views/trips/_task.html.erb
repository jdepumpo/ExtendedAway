<% tasks.order(:date).each_with_index do |task, i| %>
  <div class="accordion-item" id="<%= "#{dom_id(task)}_container" %>">
    <%= turbo_frame_tag dom_id(task) do %>
      <div class="accordion-header d-flex align-items-center" id="panelsStayOpen-heading<%=day.to_s + 0.to_s + i.to_s%>">
        <!-- <input class="form-check-input m-3" type="checkbox" id="task-<%=day.to_s + 0.to_s + i.to_s%>" data-action="change->task-done#changeDone"> checkbox -->
        <%# <input type="checkbox" class="btn-check" id="btn-check-outlined" autocomplete="off"> %>
        <%# <label class="btn btn-outline-primary" for="btn-check-outlined">Single toggle</label><br> %>
        <% if task.done? %>
          <%= link_to "☑️", task_path(task), data: {turbo_method: :patch}, class: "btn btn-primary" %>
          <button class="accordion-button collapsed d-flex" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapse<%=day.to_s + 0.to_s + i.to_s%>" aria-expanded="true" aria-controls="panelsStayOpen-collapse<%=day.to_s + 0.to_s + i.to_s%>">
              <h5 class="flex-grow-1 m-0 text-secondary text-decoration-line-through"><%= task.name %></h5>
              <span class="badge bg-secondary rounded-pill"><%= task.category.name %></span>
          </button>
          <%= link_to task_path(task), class: "btn btn-body-color", data: {turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this task?" } do %>
            <i class="fa-regular fa-trash-can"></i>
          <% end %>
        <% else %>
          <%= link_to "☐", task_path(task), data: {turbo_method: :patch}, class: "btn btn-secondary" %>
          <button class="accordion-button collapsed d-flex" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapse<%=day.to_s + 0.to_s + i.to_s%>" aria-expanded="true" aria-controls="panelsStayOpen-collapse<%=day.to_s + 0.to_s + i.to_s%>">
              <h5 class="flex-grow-1 m-0"><%= task.name %></h5>
              <span class="badge bg-secondary rounded-pill"><%= task.category.name %></span>
          </button>
          <%= link_to task_path(task), class: "btn btn-body-color", data: {turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this task?" } do %>
            <i class="fa-regular fa-trash-can"></i>
          <% end %>
        <% end %>
      </div>
      <div id="panelsStayOpen-collapse<%=day.to_s + 0.to_s + i.to_s%>" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-heading<%=day.to_s + 0.to_s + i.to_s%>">
        <div class="accordion-body">
          <%= task.description %>
        </div>
      </div>
    <% end %>
  </div>
<% end %>
